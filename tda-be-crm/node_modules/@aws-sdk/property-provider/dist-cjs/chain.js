"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.chain = void 0;
const ProviderError_1 = require("./ProviderError");
function chain(...providers) {
    return () => {
        let promise = Promise.reject(new ProviderError_1.ProviderError("No providers in chain"));
        for (const provider of providers) {
            promise = promise.catch((err) => {
                if (err === null || err === void 0 ? void 0 : err.tryNextLink) {
                    return provider();
                }
                throw err;
            });
        }
        return promise;
    };
}
exports.chain = chain;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhaW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvY2hhaW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsbURBQWdEO0FBV2hELFNBQWdCLEtBQUssQ0FBSSxHQUFHLFNBQTZCO0lBQ3ZELE9BQU8sR0FBRyxFQUFFO1FBQ1YsSUFBSSxPQUFPLEdBQWUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLDZCQUFhLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDO1FBQ3JGLEtBQUssTUFBTSxRQUFRLElBQUksU0FBUyxFQUFFO1lBQ2hDLE9BQU8sR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBUSxFQUFFLEVBQUU7Z0JBQ25DLElBQUksR0FBRyxhQUFILEdBQUcsdUJBQUgsR0FBRyxDQUFFLFdBQVcsRUFBRTtvQkFDcEIsT0FBTyxRQUFRLEVBQUUsQ0FBQztpQkFDbkI7Z0JBRUQsTUFBTSxHQUFHLENBQUM7WUFDWixDQUFDLENBQUMsQ0FBQztTQUNKO1FBRUQsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQWZELHNCQWVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tIFwiQGF3cy1zZGsvdHlwZXNcIjtcblxuaW1wb3J0IHsgUHJvdmlkZXJFcnJvciB9IGZyb20gXCIuL1Byb3ZpZGVyRXJyb3JcIjtcblxuLyoqXG4gKiBDb21wb3NlIGEgc2luZ2xlIGNyZWRlbnRpYWwgcHJvdmlkZXIgZnVuY3Rpb24gZnJvbSBtdWx0aXBsZSBjcmVkZW50aWFsXG4gKiBwcm92aWRlcnMuIFRoZSBmaXJzdCBwcm92aWRlciBpbiB0aGUgYXJndW1lbnQgbGlzdCB3aWxsIGFsd2F5cyBiZSBpbnZva2VkO1xuICogc3Vic2VxdWVudCBwcm92aWRlcnMgaW4gdGhlIGxpc3Qgd2lsbCBiZSBpbnZva2VkIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGVcbiAqIHdlcmUgcmVjZWl2ZWQgaWYgdGhlIHByZWNlZGluZyBwcm92aWRlciBkaWQgbm90IHN1Y2Nlc3NmdWxseSByZXNvbHZlLlxuICpcbiAqIElmIG5vIHByb3ZpZGVycyB3ZXJlIHJlY2VpdmVkIG9yIG5vIHByb3ZpZGVyIHJlc29sdmVzIHN1Y2Nlc3NmdWxseSwgdGhlXG4gKiByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGFpbjxUPiguLi5wcm92aWRlcnM6IEFycmF5PFByb3ZpZGVyPFQ+Pik6IFByb3ZpZGVyPFQ+IHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBsZXQgcHJvbWlzZTogUHJvbWlzZTxUPiA9IFByb21pc2UucmVqZWN0KG5ldyBQcm92aWRlckVycm9yKFwiTm8gcHJvdmlkZXJzIGluIGNoYWluXCIpKTtcbiAgICBmb3IgKGNvbnN0IHByb3ZpZGVyIG9mIHByb3ZpZGVycykge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgIGlmIChlcnI/LnRyeU5leHRMaW5rKSB7XG4gICAgICAgICAgcmV0dXJuIHByb3ZpZGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfTtcbn1cbiJdfQ==