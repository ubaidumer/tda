"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.coerceHandler = exports.freezeCheckpoint = exports.freeze = exports.clone = void 0;
const deep_freeze_es6_1 = require("deep-freeze-es6");
var json_1 = require("klona/json");
Object.defineProperty(exports, "clone", { enumerable: true, get: function () { return json_1.klona; } });
function freeze(input) {
    return (0, deep_freeze_es6_1.default)(input);
}
exports.freeze = freeze;
function freezeCheckpoint(checkpoint) {
    return freeze({
        ...checkpoint,
        context: freeze(checkpoint.context),
    });
}
exports.freezeCheckpoint = freezeCheckpoint;
function coerceHandler(handler) {
    return handler
        ? (context, token) => handler(freeze(context), token)
        : (context, _) => context;
}
exports.coerceHandler = coerceHandler;
//# sourceMappingURL=util.js.map