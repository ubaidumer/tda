{"version":3,"file":"commit-message.js","sourceRoot":"","sources":["../../../../../lib/workers/repository/onboarding/branch/commit-message.ts"],"names":[],"mappings":";;;AACA,+DAA2D;AAE3D,MAAa,8BAA8B;IAKzC,YAAY,MAAsB,EAAE,UAAkB;QACpD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IAED,MAAM;QACJ,MAAM,EACJ,mBAAmB,EACnB,uBAAuB,EACvB,mBAAmB,EACnB,kBAAkB,GACnB,GAAG,IAAI,CAAC,MAAM,CAAC;QAChB,MAAM,aAAa,GAAG,IAAI,8BAAa,EAAE,CAAC;QAE1C,IAAI,mBAAmB,EAAE;YACvB,aAAa,CAAC,eAAe,CAAC,mBAAmB,CAAC,CAAC;SACpD;aAAM,IAAI,IAAI,CAAC,yBAAyB,EAAE,EAAE;YAC3C,aAAa,CAAC,iBAAiB,CAAC,kBAAkB,EAAE,mBAAmB,CAAC,CAAC;SAC1E;QAED,IAAI,uBAAuB,EAAE;YAC3B,aAAa,CAAC,UAAU,CAAC,uBAAuB,CAAC,CAAC;SACnD;aAAM;YACL,aAAa,CAAC,UAAU,CAAC,OAAO,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC;SACpD;QAED,OAAO,aAAa,CAAC;IACvB,CAAC;IAEO,yBAAyB;QAC/B,OAAO,IAAI,CAAC,MAAM,CAAC,eAAe,KAAK,SAAS,CAAC;IACnD,CAAC;CACF;AArCD,wEAqCC","sourcesContent":["import { RenovateConfig } from '../../../../config/types';\nimport { CommitMessage } from '../../model/commit-message';\n\nexport class OnboardingCommitMessageFactory {\n  private readonly config: RenovateConfig;\n\n  private readonly configFile: string;\n\n  constructor(config: RenovateConfig, configFile: string) {\n    this.config = config;\n    this.configFile = configFile;\n  }\n\n  create(): CommitMessage {\n    const {\n      commitMessagePrefix,\n      onboardingCommitMessage,\n      semanticCommitScope,\n      semanticCommitType,\n    } = this.config;\n    const commitMessage = new CommitMessage();\n\n    if (commitMessagePrefix) {\n      commitMessage.setCustomPrefix(commitMessagePrefix);\n    } else if (this.areSemanticCommitsEnabled()) {\n      commitMessage.setSemanticPrefix(semanticCommitType, semanticCommitScope);\n    }\n\n    if (onboardingCommitMessage) {\n      commitMessage.setMessage(onboardingCommitMessage);\n    } else {\n      commitMessage.setMessage(`add ${this.configFile}`);\n    }\n\n    return commitMessage;\n  }\n\n  private areSemanticCommitsEnabled(): boolean {\n    return this.config.semanticCommits === 'enabled';\n  }\n}\n"]}