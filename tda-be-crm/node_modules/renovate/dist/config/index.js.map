{"version":3,"file":"index.js","sourceRoot":"","sources":["../../lib/config/index.ts"],"names":[],"mappings":";;;;AAAA,sCAAmC;AACnC,wCAAkE;AAClE,gEAAqC;AAErC,mCAA2C;AAElC,iGAFA,wBAAgB,OAEA;AAEzB,SAAgB,gBAAgB,CAC9B,MAAsB,EACtB,OAAe;IAEf,IAAI,aAAa,GAAmB;QAClC,GAAG,MAAM;QACT,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,IAAI;KACd,CAAC;IACF,MAAM,QAAQ,GAAG,IAAA,aAAG,EAAC,OAAO,EAAE,UAAU,CAAC,CAAC;IAC1C,IAAI,QAAQ,EAAE;QACZ,aAAa,GAAG,IAAA,wBAAgB,EAAC,aAAa,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;KACnE;IACD,aAAa,GAAG,IAAA,wBAAgB,EAAC,aAAa,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;IACjE,KAAK,MAAM,CAAC,IAAI,IAAA,yBAAe,GAAE,CAAC,MAAM,CAAC,IAAA,wBAAc,GAAE,CAAC,EAAE;QAC1D,OAAO,aAAa,CAAC,CAAC,CAAC,CAAC;KACzB;IACD,aAAa,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAClC,aAAa,CAAC,OAAO,GAAG,OAAO,CAAC;IAChC,OAAO,aAAa,CAAC;AACvB,CAAC;AApBD,4CAoBC;AAED,SAAgB,YAAY,CAC1B,WAAsB,EACtB,WAAgC;IAEhC,eAAM,CAAC,KAAK,CAAC,EAAE,MAAM,EAAE,WAAW,EAAE,EAAE,iBAAiB,WAAW,IAAI,CAAC,CAAC;IACxE,MAAM,YAAY,GAAmB,EAAE,GAAG,WAAW,EAAE,CAAC;IACxD,MAAM,MAAM,GAAG,CAAC,QAAQ,EAAE,YAAY,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;IACnE,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;IAChD,KAAK,MAAM,MAAM,IAAI,OAAO,CAAC,UAAU,EAAE,EAAE;QACzC,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,WAAW,KAAK,CAAC,CAAC,IAAI,WAAW,GAAG,WAAW,EAAE;YACnD,OAAO,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SAClC;KACF;IACD,OAAO,YAAY,CAAC;AACtB,CAAC;AAfD,oCAeC","sourcesContent":["import { logger } from '../logger';\nimport { get, getLanguageList, getManagerList } from '../manager';\nimport * as options from './options';\nimport type { AllConfig, RenovateConfig, RenovateConfigStage } from './types';\nimport { mergeChildConfig } from './utils';\n\nexport { mergeChildConfig };\n\nexport function getManagerConfig(\n  config: RenovateConfig,\n  manager: string\n): RenovateConfig {\n  let managerConfig: RenovateConfig = {\n    ...config,\n    language: null,\n    manager: null,\n  };\n  const language = get(manager, 'language');\n  if (language) {\n    managerConfig = mergeChildConfig(managerConfig, config[language]);\n  }\n  managerConfig = mergeChildConfig(managerConfig, config[manager]);\n  for (const i of getLanguageList().concat(getManagerList())) {\n    delete managerConfig[i];\n  }\n  managerConfig.language = language;\n  managerConfig.manager = manager;\n  return managerConfig;\n}\n\nexport function filterConfig(\n  inputConfig: AllConfig,\n  targetStage: RenovateConfigStage\n): AllConfig {\n  logger.trace({ config: inputConfig }, `filterConfig('${targetStage}')`);\n  const outputConfig: RenovateConfig = { ...inputConfig };\n  const stages = ['global', 'repository', 'package', 'branch', 'pr'];\n  const targetIndex = stages.indexOf(targetStage);\n  for (const option of options.getOptions()) {\n    const optionIndex = stages.indexOf(option.stage);\n    if (optionIndex !== -1 && optionIndex < targetIndex) {\n      delete outputConfig[option.name];\n    }\n  }\n  return outputConfig;\n}\n"]}