{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../lib/config/presets/local/index.ts"],"names":[],"mappings":";;;;AACA,6DAAkC;AAClC,qEAA0C;AAC1C,kFAAuD;AACvD,6DAAkC;AAClC,+DAAoC;AACpC,+DAAoC;AAGpC,MAAM,SAAS,GAAG;IAChB,qBAAkB,EAAE,KAAK;IACzB,6BAAsB,EAAE,SAAS;IACjC,0CAA4B,EAAE,eAAe;IAC7C,qBAAkB,EAAE,KAAK;IACzB,uBAAmB,EAAE,MAAM;IAC3B,uBAAmB,EAAE,MAAM;CAC5B,CAAC;AAEF,SAAgB,SAAS,CAAC,EACxB,WAAW,EAAE,OAAO,EACpB,UAAU,GAAG,SAAS,EACtB,UAAU,EACV,UAAU,EACV,UAAU,GACG;IACb,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,UAAU,CAAC;IAC1C,IAAI,CAAC,QAAQ,EAAE;QACb,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAC;KAC9D;IACD,MAAM,QAAQ,GAAG,SAAS,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC;IACnD,IAAI,CAAC,QAAQ,EAAE;QACb,MAAM,IAAI,KAAK,CACb,yBAAyB,UAAU,CAAC,QAAQ,qBAAqB,CAClE,CAAC;KACH;IACD,OAAO,QAAQ,CAAC,qBAAqB,CACnC,OAAO,EACP,UAAU,EACV,UAAU,EACV,QAAQ,EACR,UAAU,CACX,CAAC;AACJ,CAAC;AAxBD,8BAwBC","sourcesContent":["import { PlatformId } from '../../../constants';\nimport * as azure from '../azure';\nimport * as bitbucket from '../bitbucket';\nimport * as bitbucketServer from '../bitbucket-server';\nimport * as gitea from '../gitea';\nimport * as github from '../github';\nimport * as gitlab from '../gitlab';\nimport type { Preset, PresetConfig } from '../types';\n\nconst resolvers = {\n  [PlatformId.Azure]: azure,\n  [PlatformId.Bitbucket]: bitbucket,\n  [PlatformId.BitbucketServer]: bitbucketServer,\n  [PlatformId.Gitea]: gitea,\n  [PlatformId.Github]: github,\n  [PlatformId.Gitlab]: gitlab,\n};\n\nexport function getPreset({\n  packageName: pkgName,\n  presetName = 'default',\n  presetPath,\n  packageTag,\n  baseConfig,\n}: PresetConfig): Promise<Preset> {\n  const { platform, endpoint } = baseConfig;\n  if (!platform) {\n    throw new Error(`Missing platform config for local preset.`);\n  }\n  const resolver = resolvers[platform.toLowerCase()];\n  if (!resolver) {\n    throw new Error(\n      `Unsupported platform '${baseConfig.platform}' for local preset.`\n    );\n  }\n  return resolver.getPresetFromEndpoint(\n    pkgName,\n    presetName,\n    presetPath,\n    endpoint,\n    packageTag\n  );\n}\n"]}